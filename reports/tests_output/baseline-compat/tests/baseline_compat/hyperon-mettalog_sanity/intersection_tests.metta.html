<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"
>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"
>
<title></title>
<style type="text/css"
>
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi31 { color: #aa0000; }
.ansi32 { color: #00aa00; }
.ansi90 { color: #7f7f7f; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content"
>
Script started on 2024-10-24 01:26:44+00:00 [TERM="xterm-256color" TTY="/dev/pts/0" COLUMNS="-1" LINES="-1"]
P;HTML|
;           (set_option_value  compat false)

P;HTML|
;           (set_option_value  compatio false)

P;HTML|
;           (set_option_value  src_indents false)

P;HTML|
;         (set_option_value  devel false)

P;HTML|
;         (set_option_value  stack-max 500)

P;HTML|
;         (set_option_value  limit inf)

P;HTML|
;         (set_option_value  initial-result-count 10)

P;HTML|
;         (set_option_value  answer-format show)

P;HTML|
;         (set_option_value  repeats true)

P;HTML|
;         (set_option_value  time true)

P;HTML|
;         (set_option_value  synth-unit-tests false)

P;HTML|
;         (set_option_value  optimize true)

P;HTML|
;         (set_option_value  transpiler silent)

P;HTML|
;          (set_debug  transpiler false)

P;HTML|
;         (set_option_value  compile false)

P;HTML|
;         (set_option_value  tabling auto)

P;HTML|
;         (set_option_value  log false)

P;HTML|
;         (set_option_value  output ./)

P;HTML|
;         (set_option_value  exeout ./Sav.gitlab.MeTTaLog)

P;HTML|
;         (set_option_value  halt false)

P;HTML|
;         (set_option_value  trace-length 500)

P;HTML|
;         (set_option_value  trace-on-overtime 4.0)

P;HTML|
;          (set_debug  overtime 4.0)

P;HTML|
;         (set_option_value  trace-on-overflow 1000)

P;HTML|
;          (set_debug  overflow 1000)

P;HTML|
;         (set_option_value  trace-on-eval false)

P;HTML|
;          (set_debug  eval false)

P;HTML|
;         (set_option_value  trace-on-load silent)

P;HTML|
;          (set_debug  load silent)

P;HTML|
;          (set_debug  trace-on-load false)

P;HTML|
;         (set_option_value  trace-on-exec false)

P;HTML|
;          (set_debug  exec false)

P;HTML|
;         (set_option_value  trace-on-error non-type)

P;HTML|
;          (set_debug  error non-type)

P;HTML|
;         (set_option_value  trace-on-fail false)

P;HTML|
;          (set_debug  fail false)

P;HTML|
;         (set_option_value  trace-on-test true)

P;HTML|
;          (set_debug  test true)

P;HTML|
;         (set_option_value  repl-on-error true)

P;HTML|
;         (set_option_value  repl-on-fail false)

P;HTML|
;         (set_option_value  exit-on-fail false)

P;HTML|
;         (set_option_value  repl auto)

P;HTML|
;         (set_option_value  prolog false)

P;HTML|
;         (set_option_value  exec noskip)

P;HTML|
;         (set_option_value  maximum-result-count inf)

P;HTML|
;         (set_option_value  html false)

P;HTML|
;         (set_option_value  python true)

P;HTML|
;         (set_option_value  trace-on-test false)

P;HTML|
;         (set_debug  test false)

P;HTML|
;         (set_option_value  trace-on-fail false)

P;HTML|
;         (set_debug  fail false)

P;HTML|
;         (set_option_value  load show)

P;HTML|
;         (set_option_value  test false)
P;HTML|
;          (is_cmd_option  prescan halt --halt=true true)
P;HTML|
;          (set_option_value  halt true)
P;HTML|
;          (is_cmd_option  prescan stdin --stdin=tty tty)
P;HTML|
;           (set_option_value  stdin tty)
P;HTML|
;          (is_cmd_option  prescan stdout --stdout=tty tty)
P;HTML|
;           (set_option_value  stdout tty)
P;HTML|
;          (is_cmd_option  prescan stderr --stderr=tty tty)
P;HTML|
;           (set_option_value  stderr tty)
P;HTML|
;          (set_option_value  compat false)
P;HTML|
;          (set_option_value  compatio false)
P;HTML|
;          (set_option_value  src_indents false)
P;HTML|
;          (set_option_value  devel false)
P;HTML|
;          (set_option_value  stack-max 500)
P;HTML|
;          (set_option_value  limit inf)
P;HTML|
;          (set_option_value  initial-result-count 10)
P;HTML|
;          (set_option_value  answer-format show)
P;HTML|
;          (set_option_value  repeats true)
P;HTML|
;          (set_option_value  time true)
P;HTML|
;          (set_option_value  synth-unit-tests false)
P;HTML|
;          (set_option_value  optimize true)
P;HTML|
;          (set_option_value  transpiler silent)
P;HTML|
;          (set_debug  transpiler false)
P;HTML|
;          (set_option_value  compile false)
P;HTML|
;          (set_option_value  tabling auto)
P;HTML|
;          (set_option_value  log false)
P;HTML|
;          (set_option_value  output ./)
P;HTML|
;          (set_option_value  exeout ./Sav.gitlab.MeTTaLog)
P;HTML|
;          (set_option_value  halt false)
P;HTML|
;          (set_option_value  trace-length 500)
P;HTML|
;          (set_option_value  trace-on-overtime 4.0)
P;HTML|
;          (set_debug  overtime 4.0)
P;HTML|
;          (set_option_value  trace-on-overflow 1000)
P;HTML|
;          (set_debug  overflow 1000)
P;HTML|
;          (set_option_value  trace-on-eval false)
P;HTML|
;          (set_debug  eval false)
P;HTML|
;          (set_option_value  trace-on-load silent)
P;HTML|
;          (set_debug  load silent)
P;HTML|
;          (set_debug  trace-on-load false)
P;HTML|
;          (set_option_value  trace-on-exec false)
P;HTML|
;          (set_debug  exec false)
P;HTML|
;          (set_option_value  trace-on-error non-type)
P;HTML|
;          (set_debug  error non-type)
P;HTML|
;          (set_option_value  trace-on-fail false)
P;HTML|
;          (set_debug  fail false)
P;HTML|
;          (set_option_value  trace-on-test true)
P;HTML|
;          (set_debug  test true)
P;HTML|
;          (set_option_value  repl-on-error true)
P;HTML|
;          (set_option_value  repl-on-fail false)
P;HTML|
;          (set_option_value  exit-on-fail false)
P;HTML|
;          (set_option_value  repl auto)
P;HTML|
;          (set_option_value  prolog false)
P;HTML|
;          (set_option_value  exec noskip)
P;HTML|
;          (set_option_value  maximum-result-count inf)
P;HTML|
;          (set_option_value  html false)
P;HTML|
;          (set_option_value  python true)
P;HTML|
;         (set_option_value  trace-on-test false)
P;HTML|
;          (set_debug  test false)
P;HTML|
;         (set_option_value  trace-on-fail false)
P;HTML|
;          (set_debug  fail false)
P;HTML|
;         (set_option_value  load show)
P;HTML|
;         (set_option_value  test true)
P;HTML|
;        (is_cmd_option  execute python --python=enable enable)
P;HTML|
;         (set_option_value  python enable)
P;HTML|
;        (is_cmd_option  execute timeout --timeout=40 40)
P;HTML|
;         (set_option_value  timeout 40)
P;HTML|
;         (is_cmd_option  execute output --output=./reports/tests_output/baseline-compat/ ./reports/tests_output/baseline-compat/)
P;HTML|
;         (set_option_value  output ./reports/tests_output/baseline-compat/)
P;HTML|
;         (is_cmd_option  execute html --html true)
P;HTML|
;          (set_option_value  html true)
P;HTML|
;         (is_cmd_option  execute test --test true)
P;HTML|
;          (set_option_value  test true)

; (load_metta_file  &self tests/baseline_compat/hyperon-mettalog_sanity/intersection_tests.metta)
P;HTML|
;                       (track_load_into_file  /home/runner/work/metta-wam/metta-wam/tests/baseline_compat/hyperon-mettalog_sanity/intersection_tests.metta)
P;HTML|
;                                        (load_answer_file  /home/runner/work/metta-wam/metta-wam/tests/baseline_compat/hyperon-mettalog_sanity/intersection_tests.metta.answers /home/runner/work/metta-wam/metta-wam/tests/baseline_compat/hyperon-mettalog_sanity/intersection_tests.metta)
P;HTML|
;                                         (= 1  "[(Error (assertEqual (intersection (superpose (a b c d)) (superpose (c d e f))) (superpose (c d))) ")
P;HTML|
;                                         (= 1  "Expected: [c, d]")
P;HTML|
;                                         (= 1  "Got: []")
P;HTML|
;                                         (= 2  "Missed result: c)]")
P;HTML|
;                                         (= 2  "0.02user 0.00system 0:00.05elapsed 49%CPU (0avgtext+0avgdata 24552maxresident)k")
P;HTML|
;                                         (= 2  "24280inputs+0outputs (145major+2901minor)pagefaults 0swaps")
<span class="ansi1 ansi90"
>
Info: File /home/runner/work/metta-wam/metta-wam/tests/baseline_compat/hyperon-mettalog_sanity/intersection_tests.metta is 8.63K bytes (244 lines)
</span>P;HTML|
;                                        (load_answer_file  /home/runner/work/metta-wam/metta-wam/tests/baseline_compat/hyperon-mettalog_sanity/intersection_tests.metta.answers /home/runner/work/metta-wam/metta-wam/tests/baseline_compat/hyperon-mettalog_sanity/intersection_tests.metta)

;;; 16:28 18-8-2024
;;; !(intersect (superpose (a b c d )) (superpose ( c d e f )))
;;exec([assertEqual,[intersection,[superpose,[a,b,c,d]],[superpose,[c,d,e,f]]],[superpose,[c,d]]])
;;; Intersection Tests with Variable Substitution and Evaluation
;;;; Test basic intersection functionality
;;;; This checks that intersecting (a b c d) with (b c) correctly returns (b c).
;;exec([assertEqual,[intersection,[superpose,[a,b,c,d]],[superpose,[b,c]]],[superpose,[b,c]]])
;;;; Test intersection with multiple subsequent lists
;;;; Here, intersecting (a b c d) with (b c) and then (d) should result in an empty set.
;;exec([assertEqual,[intersection,[intersection,[superpose,[a,b,c,d]],[superpose,[b,c]]],[superpose,[d]]],[superpose,[]]])
;;;; Test intersection with nested structures
;;;; This test ensures that nested elements like (foo (bar baz)) are handled correctly.
;;exec([assertEqual,[intersection,[superpose,[[foo,bar],[bar,baz],qux]],[superpose,[[bar,baz],qux]]],[superpose,[[bar,baz],qux]]])
;;;; Test intersection with mixed types
;;;; This checks that the function handles lists with symbols, numbers, and mixed content.
;;exec([assertEqual,[intersection,[superpose,[1,2,3,foo,bar]],[superpose,[2,foo]]],[superpose,[2,foo]]])
;;Test
;;intersection
;;with
;;duplicates
;;;; This test ensures that duplicates are treated correctly in the intersection.
;;exec([assertEqual,[intersection,[superpose,[a,b,b,c,d]],[superpose,[b,c]]],[superpose,[b,c]]])
;;;; Test intersection with `unique` applied outside
;;;; In this case, `unique` is applied after the intersection, removing duplicates.
;;exec([assertEqual,[unique,[intersection,[superpose,[a,b,b,c]],[superpose,[b,c,c,d]]]],[superpose,[b,c]]])
;;;; Test intersection with empty lists
;;;; Intersecting an empty list should return an empty set.
;;exec([assertEqual,[intersection,[superpose,[a,b,c]],[superpose,[]]],[superpose,[]]])
;;;; Test intersection with disjoint sets
;;;; This checks that intersecting two disjoint sets returns an empty set.
;;exec([assertEqual,[intersection,[superpose,[a,b,c]],[superpose,[x,y,z]]],[superpose,[]]])
;;;; Test intersection with overlapping sets
;;;; This test checks that intersecting sets with some common elements returns only those common elements.
;;exec([assertEqual,[intersection,[superpose,[a,b,c,d]],[superpose,[b,c,x,y]]],[superpose,[b,c]]])
;;;; Test intersection with identical sets
;;;; This ensures that intersecting two identical sets returns the original set.
;;exec([assertEqual,[intersection,[superpose,[a,b,c,d]],[superpose,[a,b,c,d]]],[superpose,[a,b,c,d]]])
;;;; Test intersection with self-referential structures
;;;; This test checks the behavior when intersecting a list with itself.
;;exec([assertEqual,[intersection,[superpose,[a,b,c,[a,b,c]]],[superpose,[a,b,c,[a,b,c]]]],[superpose,[a,b,c,[a,b,c]]]])
;;;; Test intersection with a single element set
;;;; This test ensures that intersecting a set with a single-element set returns the element if it's present.
;;exec([assertEqual,[intersection,[superpose,[a,b,c,d]],[superpose,[c]]],[superpose,[c]]])
;;;; Test intersection with a superset and subset
;;;; This checks that intersecting a superset with its subset returns the subset.
;;exec([assertEqual,[intersection,[superpose,[a,b,c,d,e,f]],[superpose,[b,c,d]]],[superpose,[b,c,d]]])
;;;; Test intersection with a mix of lists and individual elements
;;;; This ensures that mixed types are correctly intersected.
;;exec([assertEqual,[intersection,[superpose,[a,[b,c],d]],[superpose,[[b,c],e,f]]],[superpose,[[b,c]]]])
;;;; Test intersection with nested lists and empty list
;;;; This checks the behavior when one of the lists is empty, even when nested lists are involved.
;;exec([assertEqual,[intersection,[superpose,[[a,b],[c,d]]],[superpose,[]]],[superpose,[]]])
;;;; Test intersection with mixed numeric and symbolic lists
;;;; This test checks the behavior when intersecting lists containing both numbers and symbols.
;;exec([assertEqual,[intersection,[superpose,[1,2,3,foo,bar]],[superpose,[3,foo,baz]]],[superpose,[3,foo]]])
;;;; Test intersection with variables and nested structures
;;;; This checks how variables interact with nested lists during intersection.
;;exec([assertEqual,[intersection,[superpose,[[foo,_x],[bar,_y]]],[superpose,[[bar,_y],[foo,qux]]]],[superpose,[[bar,_y]]]])
;;;; Test intersection with variables and lists
;;;; This ensures variables within lists are correctly intersected.
;;exec([assertEqual,[intersection,[superpose,[_x,b,c]],[superpose,[b,_y,c]]],[superpose,[b,c]]])
;;;; Test intersection with variables and complex structures
;;;; This checks that complex structures with variables are correctly intersected.
;;exec([assertEqual,[intersection,[superpose,[[_x,b],[c,d]]],[superpose,[[a,_y],[c,d]]]],[superpose,[[c,d]]]])
;;;; Test intersection with expressions that evaluate to a value
;;;; This ensures that expressions like (+ 1 2) that unify with 3 are handled correctly.
;;exec([assertEqualToResult,[pred-intersection,unified,[superpose,[[_x,[+,1,2]],[3,4]]],[superpose,[[3,_y],[4,[+,1,2]]]]],[[3,3],[3,4],[4,3]]])
;;;; Test intersection with nested structures and expressions
;;;; This checks that variables and expressions are correctly intersected within nested structures.
;;exec([assertEqual,[intersection,[superpose,[[foo,[+,1,2]],[bar,_y]]],[superpose,[[foo,3],[bar,baz]]]],[superpose,[[foo,3]]]])
;;;; Test intersection with nested structures and expressions
;;;; This checks that variables and expressions are correctly intersected within nested structures.
;;exec([assertNotEqual,[pred-intersection,unified,[superpose,[[foo,[+,1,2]],[bar,_y]]],[superpose,[[foo,3],[bar,baz]]]],[superpose,[[foo,3],[bar,_y]]]])
;;;; Test intersection with variables and evaluated expressions
;;;; This ensures that variables and evaluated expressions are correctly intersected.
;;exec([assertEqual,[intersection,[superpose,[[_x,b],[+,2,2]]],[superpose,[[a,_y],4]]],[superpose,[4]]])
;;;; Test intersection with a potential infinite loop due to improper occurs check
;;;; This test ensures that the intersection function correctly handles cases where a variable
;;;; might unify with a structure containing that same variable, which should not be allowed.
;;exec([assertEqual,[intersection,[superpose,[_x,[f,_x]]],[superpose,[[f,[f,_x]]]]],[superpose,[]]])
;;;; Test intersection with self-referential structures
;;;; This test ensures that self-referential structures correctly intersect when they should.
;;exec([assertEqual,[intersection,[superpose,[_y,[f,_x]]],[superpose,[_a,[f,_b]]]],[superpose,[[f,_x]]]])
;;;; Test intersection with self-referential structures
;;;; This test ensures that self-referential structures correctly intersect when they should.
;;exec([assertEqual,[intersection,[superpose,[[f,_x],_y]],[superpose,[[f,_b],_a]]],[superpose,[[f,_x]]]])
;;;; once alpha equivalence is established then the ideities take hold
;;exec([assertEqual,[intersection,[superpose,[[f,_x],_x]],[superpose,[[f,_a],_a]]],[superpose,[[f,_x],_x]]])
;;;; Reversed: alpha equivalence is established too late?
;;exec([assertEqual,[intersection,[superpose,[_x,[f,_x]]],[superpose,[_a,[f,_a]]]],[superpose,[_x,[f,_x]]]])
;;;; Test intersection with potential variable misidentification
;;;; This test ensures that variables are correctly identified and don't lead to erroneous unifications.
;;exec([assertEqual,[intersection,[superpose,[_y,[f,_x]]],[superpose,[_x,[f,_x]]]],[superpose,[[f,_x]]]])
;;;; Test intersection with potential variable misidentification
;;;; This test ensures that variables are correctly identified and don't lead to erroneous unifications.
;;exec([assertEqual,[intersection,[superpose,[_x,[f,_y]]],[superpose,[[f,_y],_x]]],[superpose,[_x,[f,_y]]]])
;;;
;;; (= (intersection $x $y) (superpose (intersect-elements (collapse $x) (collapse $y))))
;;; A Test to show we can define a function to be used like how normal people are imagining
;;[=,[intersect-elements,_x,_y],[collapse,[intersection,[superpose,_x],[superpose,_y]]]]
;;exec([assertEqual,[intersect-elements,[1,2,3,foo,bar],[2,foo]],[2,foo]])
;;



!(bind! &ctx1 (make-space (f1 f2 f3)))

!(bind! &ctx2 (make-space (f1 f2 f3 f4 f5)))

(intersection (get-atoms &ctx1) (get-atoms &ctx2)) 

    

!(get-atoms &ctx1) -> 1 2 3 4 5 6 7 ... .. ... 

!(get-atoms &ctx2) -> 1 2 3 4 5 6 7 ... .. ... 

  

(= (intersection $x $y) (superpose (intersection-element (collapse $x) (collapse $y))))



(intersection (get-atoms &ctx1) (get-atoms &ctx2)) 

 1 2 3 4 5 ... 



 - Rust Prolog

 - Sicstus CLP(FD) 1000x 

 - GNUProlog

 - XSB-Prolog


<span class="ansi32"
>% 271,998 inferences, 0.049 CPU in 0.052 seconds (95% CPU, 5514023 Lips)
</span>P;HTML|
;                       (= /home/runner/work/metta-wam/metta-wam/tests/baseline_compat/hyperon-mettalog_sanity/intersection_tests.metta  0)
<br/> <a href="#" onclick="window.history.back(); return false;"
>Return to summaries</a><br/>
P;HTML|
;         (is_cmd_option  execute halt --halt=true true)
P;HTML|
;          (set_option_value  halt true)
P;HTML|
;          (is_cmd_option  execute stdin --stdin=tty tty)
P;HTML|
;          (set_option_value  stdin tty)
P;HTML|
;          (is_cmd_option  execute stdout --stdout=tty tty)
P;HTML|
;           (set_option_value  stdout tty)
P;HTML|
;          (is_cmd_option  execute stderr --stderr=tty tty)
P;HTML|
;           (set_option_value  stderr tty)
P;HTML|
;         (set_option_value  compat false)
P;HTML|
;         (set_option_value  compatio false)
P;HTML|
;         (set_option_value  src_indents false)
P;HTML|
;         (set_option_value  devel false)
P;HTML|
;         (set_option_value  stack-max 500)
P;HTML|
;         (set_option_value  limit inf)
P;HTML|
;         (set_option_value  initial-result-count 10)
P;HTML|
;         (set_option_value  answer-format show)
P;HTML|
;         (set_option_value  repeats true)
P;HTML|
;         (set_option_value  time true)
P;HTML|
;         (set_option_value  synth-unit-tests false)
P;HTML|
;         (set_option_value  optimize true)
P;HTML|
;         (set_option_value  transpiler silent)
P;HTML|
;          (set_debug  transpiler false)
P;HTML|
;         (set_option_value  compile false)
P;HTML|
;         (set_option_value  tabling auto)
P;HTML|
;         (set_option_value  log false)
P;HTML|
;         (set_option_value  output ./)
P;HTML|
;         (set_option_value  exeout ./Sav.gitlab.MeTTaLog)
P;HTML|
;         (set_option_value  halt false)
P;HTML|
;         (set_option_value  trace-length 500)
P;HTML|
;         (set_option_value  trace-on-overtime 4.0)
P;HTML|
;          (set_debug  overtime 4.0)
P;HTML|
;         (set_option_value  trace-on-overflow 1000)
P;HTML|
;          (set_debug  overflow 1000)
P;HTML|
;         (set_option_value  trace-on-eval false)
P;HTML|
;          (set_debug  eval false)
P;HTML|
;         (set_option_value  trace-on-load silent)
P;HTML|
;          (set_debug  load silent)
P;HTML|
;          (set_debug  trace-on-load false)
P;HTML|
;         (set_option_value  trace-on-exec false)
P;HTML|
;          (set_debug  exec false)
P;HTML|
;         (set_option_value  trace-on-error non-type)
P;HTML|
;          (set_debug  error non-type)
P;HTML|
;         (set_option_value  trace-on-fail false)
P;HTML|
;          (set_debug  fail false)
P;HTML|
;         (set_option_value  trace-on-test true)
P;HTML|
;          (set_debug  test true)
P;HTML|
;         (set_option_value  repl-on-error true)
P;HTML|
;         (set_option_value  repl-on-fail false)
P;HTML|
;         (set_option_value  exit-on-fail false)
P;HTML|
;         (set_option_value  repl auto)
P;HTML|
;         (set_option_value  prolog false)
P;HTML|
;         (set_option_value  exec noskip)
P;HTML|
;         (set_option_value  maximum-result-count inf)
P;HTML|
;         (set_option_value  html false)
P;HTML|
;         (set_option_value  python true)
P;HTML|
;         (set_option_value  trace-on-test false)
P;HTML|
;          (set_debug  test false)
P;HTML|
;         (set_option_value  trace-on-fail false)
P;HTML|
;          (set_debug  fail false)
P;HTML|
;         (set_option_value  load show)
P;HTML|
;         (set_option_value  test true)
P;HTML|
;         (maybe_halt  7)
<span class="ansi31"
>(in  (maybe_halt  7) (unwind  (halt  7)))
</span>
Script done on 2024-10-24 01:26:49+00:00 [COMMAND_EXIT_CODE="7"]

</pre>
</body>

</html>
\033[0;32mCompleted successfully (EXITCODE=7) Under 40 seconds: ./mettalog '--output=./reports/tests_output/baseline-compat/' --timeout=40 --html --repl=false  --test "tests/baseline_compat/hyperon-mettalog_sanity/intersection_tests.metta" --halt=true\033[0m
