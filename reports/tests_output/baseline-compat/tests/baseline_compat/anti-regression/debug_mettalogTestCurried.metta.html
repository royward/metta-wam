<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi32 { color: #00aa00; }
.ansi90 { color: #7f7f7f; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-255165000 { color: #FFA500; }
.ansi38-013099040 { color: #0D6328; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
Script started on 2024-10-28 21:41:25+00:00 [TERM="xterm-256color" TTY="/dev/pts/0" COLUMNS="-1" LINES="-1"]
P;HTML|
;           (set_option_value  compat false)

P;HTML|
;           (set_option_value  compatio false)

P;HTML|
;           (set_option_value  src_indents false)

P;HTML|
;         (set_option_value  devel false)

P;HTML|
;         (set_option_value  stack-max 500)

P;HTML|
;         (set_option_value  limit inf)

P;HTML|
;         (set_option_value  initial-result-count 10)

P;HTML|
;         (set_option_value  answer-format show)

P;HTML|
;         (set_option_value  repeats true)

P;HTML|
;         (set_option_value  time true)

P;HTML|
;         (set_option_value  synth-unit-tests false)

P;HTML|
;         (set_option_value  optimize true)

P;HTML|
;         (set_option_value  transpiler silent)

P;HTML|
;          (set_debug  transpiler false)

P;HTML|
;         (set_option_value  compile false)

P;HTML|
;         (set_option_value  tabling auto)

P;HTML|
;         (set_option_value  log false)

P;HTML|
;         (set_option_value  output ./)

P;HTML|
;         (set_option_value  exeout ./Sav.gitlab.MeTTaLog)

P;HTML|
;         (set_option_value  halt false)

P;HTML|
;         (set_option_value  trace-length 500)

P;HTML|
;         (set_option_value  trace-on-overtime 4.0)

P;HTML|
;          (set_debug  overtime 4.0)

P;HTML|
;         (set_option_value  trace-on-overflow 1000)

P;HTML|
;          (set_debug  overflow 1000)

P;HTML|
;         (set_option_value  trace-on-eval false)

P;HTML|
;          (set_debug  eval false)

P;HTML|
;         (set_option_value  trace-on-load silent)

P;HTML|
;          (set_debug  load silent)

P;HTML|
;          (set_debug  trace-on-load false)

P;HTML|
;         (set_option_value  trace-on-exec false)

P;HTML|
;          (set_debug  exec false)

P;HTML|
;         (set_option_value  trace-on-error non-type)

P;HTML|
;          (set_debug  error non-type)

P;HTML|
;         (set_option_value  trace-on-fail false)

P;HTML|
;          (set_debug  fail false)

P;HTML|
;         (set_option_value  trace-on-test true)

P;HTML|
;          (set_debug  test true)

P;HTML|
;         (set_option_value  repl-on-error true)

P;HTML|
;         (set_option_value  repl-on-fail false)

P;HTML|
;         (set_option_value  exit-on-fail false)

P;HTML|
;         (set_option_value  repl auto)

P;HTML|
;         (set_option_value  prolog false)

P;HTML|
;         (set_option_value  exec noskip)

P;HTML|
;         (set_option_value  maximum-result-count inf)

P;HTML|
;         (set_option_value  html false)

P;HTML|
;         (set_option_value  python true)

P;HTML|
;         (set_option_value  trace-on-test false)

P;HTML|
;         (set_debug  test false)

P;HTML|
;         (set_option_value  trace-on-fail false)

P;HTML|
;         (set_debug  fail false)

P;HTML|
;         (set_option_value  load show)

P;HTML|
;         (set_option_value  test false)
P;HTML|
;          (is_cmd_option  prescan halt --halt=true true)
P;HTML|
;          (set_option_value  halt true)
P;HTML|
;          (is_cmd_option  prescan stdin --stdin=tty tty)
P;HTML|
;           (set_option_value  stdin tty)
P;HTML|
;          (is_cmd_option  prescan stdout --stdout=tty tty)
P;HTML|
;           (set_option_value  stdout tty)
P;HTML|
;          (is_cmd_option  prescan stderr --stderr=tty tty)
P;HTML|
;           (set_option_value  stderr tty)
P;HTML|
;          (set_option_value  compat false)
P;HTML|
;          (set_option_value  compatio false)
P;HTML|
;          (set_option_value  src_indents false)
P;HTML|
;          (set_option_value  devel false)
P;HTML|
;          (set_option_value  stack-max 500)
P;HTML|
;          (set_option_value  limit inf)
P;HTML|
;          (set_option_value  initial-result-count 10)
P;HTML|
;          (set_option_value  answer-format show)
P;HTML|
;          (set_option_value  repeats true)
P;HTML|
;          (set_option_value  time true)
P;HTML|
;          (set_option_value  synth-unit-tests false)
P;HTML|
;          (set_option_value  optimize true)
P;HTML|
;          (set_option_value  transpiler silent)
P;HTML|
;          (set_debug  transpiler false)
P;HTML|
;          (set_option_value  compile false)
P;HTML|
;          (set_option_value  tabling auto)
P;HTML|
;          (set_option_value  log false)
P;HTML|
;          (set_option_value  output ./)
P;HTML|
;          (set_option_value  exeout ./Sav.gitlab.MeTTaLog)
P;HTML|
;          (set_option_value  halt false)
P;HTML|
;          (set_option_value  trace-length 500)
P;HTML|
;          (set_option_value  trace-on-overtime 4.0)
P;HTML|
;          (set_debug  overtime 4.0)
P;HTML|
;          (set_option_value  trace-on-overflow 1000)
P;HTML|
;          (set_debug  overflow 1000)
P;HTML|
;          (set_option_value  trace-on-eval false)
P;HTML|
;          (set_debug  eval false)
P;HTML|
;          (set_option_value  trace-on-load silent)
P;HTML|
;          (set_debug  load silent)
P;HTML|
;          (set_debug  trace-on-load false)
P;HTML|
;          (set_option_value  trace-on-exec false)
P;HTML|
;          (set_debug  exec false)
P;HTML|
;          (set_option_value  trace-on-error non-type)
P;HTML|
;          (set_debug  error non-type)
P;HTML|
;          (set_option_value  trace-on-fail false)
P;HTML|
;          (set_debug  fail false)
P;HTML|
;          (set_option_value  trace-on-test true)
P;HTML|
;          (set_debug  test true)
P;HTML|
;          (set_option_value  repl-on-error true)
P;HTML|
;          (set_option_value  repl-on-fail false)
P;HTML|
;          (set_option_value  exit-on-fail false)
P;HTML|
;          (set_option_value  repl auto)
P;HTML|
;          (set_option_value  prolog false)
P;HTML|
;          (set_option_value  exec noskip)
P;HTML|
;          (set_option_value  maximum-result-count inf)
P;HTML|
;          (set_option_value  html false)
P;HTML|
;          (set_option_value  python true)
P;HTML|
;         (set_option_value  trace-on-test false)
P;HTML|
;          (set_debug  test false)
P;HTML|
;         (set_option_value  trace-on-fail false)
P;HTML|
;          (set_debug  fail false)
P;HTML|
;         (set_option_value  load show)
P;HTML|
;         (set_option_value  test true)
P;HTML|
;        (is_cmd_option  execute python --python=enable enable)
P;HTML|
;         (set_option_value  python enable)
P;HTML|
;        (is_cmd_option  execute timeout --timeout=40 40)
P;HTML|
;         (set_option_value  timeout 40)
P;HTML|
;         (is_cmd_option  execute output --output=./reports/tests_output/baseline-compat/ ./reports/tests_output/baseline-compat/)
P;HTML|
;         (set_option_value  output ./reports/tests_output/baseline-compat/)
P;HTML|
;         (is_cmd_option  execute html --html true)
P;HTML|
;          (set_option_value  html true)
P;HTML|
;         (is_cmd_option  execute test --test true)
P;HTML|
;          (set_option_value  test true)

; (load_metta_file  &self tests/baseline_compat/anti-regression/debug_mettalogTestCurried.metta)
P;HTML|
;                       (track_load_into_file  /home/runner/work/metta-wam/metta-wam/tests/baseline_compat/anti-regression/debug_mettalogTestCurried.metta)
P;HTML|
;                                        (load_answer_file  /home/runner/work/metta-wam/metta-wam/tests/baseline_compat/anti-regression/debug_mettalogTestCurried.metta.answers /home/runner/work/metta-wam/metta-wam/tests/baseline_compat/anti-regression/debug_mettalogTestCurried.metta)
<span class="ansi1 ansi90">
Info: File /home/runner/work/metta-wam/metta-wam/tests/baseline_compat/anti-regression/debug_mettalogTestCurried.metta is 21.2K bytes (329 lines)
</span>P;HTML|
;                                        (load_answer_file  /home/runner/work/metta-wam/metta-wam/tests/baseline_compat/anti-regression/debug_mettalogTestCurried.metta.answers /home/runner/work/metta-wam/metta-wam/tests/baseline_compat/anti-regression/debug_mettalogTestCurried.metta)

;;;;;;;;;;;
;;;; Nat ;;
;;;;;;;;;;;
;;;; Define Nat
<span class="ansi38-255165000"> (: Nat Type)
</span><span class="ansi38-255165000"> (: Z Nat)
</span><span class="ansi38-255165000"> (: S (-> Nat Nat))
</span>;;;; Define <=
<span class="ansi38-255165000"> (: <= (-> $a $a Bool))
</span><span class="ansi38-255165000"> (= (<= $x $y) (or (< $x $y) (== $x $y)))
</span>;;;; Define cast functions between Nat and Number
<span class="ansi38-255165000"> (: fromNumber (-> Number Nat))
</span><span class="ansi38-255165000"> (= (fromNumber $n) (if (<= $n 0) Z (S (fromNumber (- $n 1)))))
</span><span class="ansi38-255165000"> (: fromNat (-> Nat Number))
</span><span class="ansi38-255165000"> (= (fromNat Z) 0)
</span><span class="ansi38-255165000"> (= (fromNat (S $k)) (+ 1 (fromNat $k)))
</span>;;;; Define max
<span class="ansi38-255165000"> (: max (-> $a $a $a))
</span><span class="ansi38-255165000"> (= (max $x $y) (if (> $x $y) $x $y))
</span>;;;; Define min
<span class="ansi38-255165000"> (: min (-> $a $a $a))
</span><span class="ansi38-255165000"> (= (min $x $y) (if (< $x $y) $x $y))
</span>;;;; Tuple count grounded python function
;;;;!(extend-py! ../utils/helper.py)
;;;; This is very slow, use the grounded python function instead
<span class="ansi38-255165000"> (= (tuple-count $tuple) (if (== $tuple ()) 0 (+ 1 (tuple-count (cdr-atom $tuple)))))
</span><span class="ansi38-013099040">!(bind! &specializations (new-space))

</span>
Deterministic: ()
<span class="ansi38-013099040">!(bind! &abstractions (new-space))

</span>
Deterministic: ()
;;;; Initialization
<span class="ansi38-255165000"> (= (init-miner $db $msup $highsurp) (superpose ((extract-valuation $db) (add-atom &self (= (refdb) $db)) (add-atom &self (= (msNat) (fromNumber $msup))) (add-atom &self (= (highsurp) $highsurp)))))
</span>;;;; Search for Triplets in DB 
;;;; collect valuation sets and generate specializations
<span class="ansi38-255165000"> (= (extract-valuation $db) (match $db ($link $x $y) (superpose ((build-specialization ($link $x (VarIdx (S Z)))) (build-specialization ($link (VarIdx Z) $y)) (add-abstractions ($link (VarIdx Z) (VarIdx (S Z))))))))
</span><span class="ansi38-255165000"> (= (build-specialization $sp) (case (match &specializations $sp $sp) ((%void% (add-atom &specializations $sp)))))
</span><span class="ansi38-255165000"> (= (add-abstractions $aptrn) (case (match &abstractions $aptrn $aptrn) ((%void% (add-atom &abstractions $aptrn)))))
</span>;;;; Get unique links
<span class="ansi38-255165000"> (= (get-links) (match &abstractions ($link $x $y) $link))
</span>;;;; Get abstract patterns
<span class="ansi38-255165000"> (= (abstract-patterns) (match &abstractions $aptrn $aptrn))
</span>;;;; Specialize a pattern
<span class="ansi38-255165000"> (= (specialize $link) (match &specializations ($link $x $y) ($link $x $y)))
</span>;;;; all Specializations
<span class="ansi38-255165000"> (= (all-specialization) (match &specializations $x $x))
</span>;;;; Todo: implement Debruijn index
;;;; Define DeBruijn Index
<span class="ansi38-255165000"> (: DeBruijn Type)
</span><span class="ansi38-255165000"> (: VarIdx (-> Nat DeBruijn))
</span><span class="ansi38-255165000"> (= (fromDeb $pattern $Xvar $Yvar) (case ((get-metatype $pattern) $pattern) (((Variable $) $pattern) (($ $pattern) (let ($link $a $b) $pattern (case ($link (get-type $a) (get-type $b)) ((($link DeBruijn %Undefined%) ($link $Xvar $b)) (($link %Undefined% DeBruijn) ($link $a $Yvar)) (($link DeBruijn DeBruijn) ($link $Xvar $Yvar)) ($ $pattern))))) ($ $pattern))))
</span><span class="ansi38-255165000"> (= (fromDebruijn $ptrn $Xvar $Yvar) (case $ptrn (((, $p1 $p2) (, (fromDeb $p1 $Xvar $Yvar) (fromDeb $p2 $Xvar $Yvar))) ((, $p1 $p2 $p3) (, (fromDeb $p1 $Xvar $Yvar) (fromDeb $p2 $Xvar $Yvar) (fromDeb $p3 $Xvar $Yvar))) ($ (fromDeb $ptrn $Xvar $Yvar)))))
</span>;;; Count the number of instances of a given pattern
<span class="ansi38-255165000"> (= (count $pattern) (let $result (case (match &self (= (refdb) $db) $db) (($db (let $dptrn (fromDebruijn $pattern $Xvar $Yvar) (collapse (match $db $dptrn $dptrn)))) (%void% ()))) (tuple-count $result)))
</span><span class="ansi38-255165000"> (= (countNat $pattern) (fromNumber (count $pattern)))
</span>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;; Knowledge and rule base ;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;; Test
;;; !(import! &db ../data/sample.metta)
<span class="ansi38-013099040">!(bind! &db (new-space))

</span>
Deterministic: ()
<span class="ansi38-013099040">!(add-atom &db (Inheritance B A))

</span><span class="ansi38-255165000"> (Inheritance B A)
</span>
Deterministic: ()
<span class="ansi38-013099040">!(add-atom &db (Inheritance C A))

</span><span class="ansi38-255165000"> (Inheritance C A)
</span>
Deterministic: ()
<span class="ansi38-013099040">!(add-atom &db (Inheritance D E))

</span><span class="ansi38-255165000"> (Inheritance D E)
</span>
Deterministic: ()
<span class="ansi38-013099040">!(add-atom &db (Inheritance C E))

</span><span class="ansi38-255165000"> (Inheritance C E)
</span>
Deterministic: ()
;;;; Parameters
<span class="ansi38-255165000"> (= (highsurp) 0.8)
</span><span class="ansi38-255165000"> (= (ms) 1)
</span><span class="ansi38-013099040">!(init-miner &db (ms) (highsurp))

</span>   <span class="ansi1 ansi32">Call: </span>(221) [system] _202218='init-miner' ? <span class="ansi1 ansi90">Info: Processing progress: 100% </span><span class="ansi1 ansi90"> - Stopping reporting on /home/runner/work/metta-wam/metta-wam/tests/baseline_compat/anti-regression/debug_mettalogTestCurried.metta progress.
</span>
Script done on 2024-10-28 21:42:05+00:00 [COMMAND_EXIT_CODE="143"]

</pre>
</body>

</html>
\033[1;33mCompleted (EXITCODE=143) Under 40 seconds: ./mettalog '--output=./reports/tests_output/baseline-compat/' --timeout=40 --html --repl=false  --test "tests/baseline_compat/anti-regression/debug_mettalogTestCurried.metta" --halt=true\033[0m
