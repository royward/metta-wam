

(= (map $f ()) ())
(= (map $f (:: $x $xs))
   (:: ($f $x) (map $f $xs)))
(= (square $x) (* $x $x))
(= (twice $x) (* $x 2))
! (map square (:: 1 (:: 2 (:: 3 ())))) 
; (:: 1 (:: 4 (:: 9 ())))
! (map twice (:: 1 (:: 2 (:: 3 ())))) 
; (:: 2 (:: 4 (:: 6 ())))
! (map A (:: 1 (:: 2 (:: 3 ())))) 
; (:: (A 1) (:: (A 2) (:: (A 3) ())))


;;
;[(:: 1 (:: 4 (:: 9 ())))]
;[(:: 2 (:: 4 (:: 6 ())))]
;[(:: (A 1) (:: (A 2) (:: (A 3) ())))]


;[ (:: 1    (:: 4      (:: 9 ())))]
;[ (:: 2    (:: 4      (:: 6 ())))]
;[ (::    (A 1)    (::      (A 2)      (::        (A 3) ()))) ]
;% 207,886 inferences, 0.224 CPU in 0.231 seconds (97% CPU, 929596 Lips)